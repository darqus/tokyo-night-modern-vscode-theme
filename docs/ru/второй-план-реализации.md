# План реализации: Замена цветов текста (вторая итерация)

Этот документ описывает план по замене некорректных цветов текста (`black`, `gray100`, `blue100`), выявленных в ходе [углубленного анализа](углубленный-анализ-цветов.md).

## 1. Общая стратегия

Замена будет производиться с использованием существующих семантических токенов из `src/theme/palette/semantic/typography.ts`. В случаях, где подходящего токена нет, будет предложено создание нового.

## 2. Замена `foundationColors.black` (`#000000`)

| Файл | Строка | UI-элемент | Старый цвет | Новый семантический токен |
|---|---|---|---|---|
| `src/theme/ui-modules/inputs-buttons.ts` | 29 | `inputValidation.infoForeground` | `foundationColors.black` | `text.primary` |
| `src/theme/ui-modules/inputs-buttons.ts` | 32 | `inputValidation.warningForeground` | `foundationColors.black` | `text.primary` |

**Обоснование:** `text.primary` (`foundationColors.gray500`) является стандартным цветом для основного текста и обеспечит лучшую интеграцию в палитру, чем чистый черный.

## 3. Замена `foundationColors.gray100` (`#f5f5f5`)

| Файл | Строка | UI-элемент | Старый цвет | Новый семантический токен |
|---|---|---|---|---|
| `src/theme/ui-modules/lists.ts` | 11 | `list.deemphasizedForeground` | `foundationColors.gray100` | `text.secondary` |
| `src/theme/ui-modules/lists.ts` | 15 | `list.focusForeground` | `foundationColors.gray100` | `text.primary` |
| `src/theme/ui-modules/inputs-buttons.ts` | 19 | `input.foreground` | `foundationColors.gray100` | `text.primary` |
| `src/theme/ui-modules/inputs-buttons.ts` | 23 | `inputOption.activeForeground` | `foundationColors.gray100` | `text.primary` |
| `src/theme/ui-modules/peek-view.ts` | 14 | `peekViewResult.fileForeground` | `foundationColors.gray100` | `text.primary` |
| `src/theme/ui-modules/peek-view.ts` | 18 | `peekViewResult.selectionForeground`| `foundationColors.gray100` | `text.primary` |
| `src/theme/ui-modules/peek-view.ts` | 20 | `peekViewTitleDescription.foreground`| `foundationColors.gray100` | `text.primary` |

**Обоснование:**
- `text.secondary` (`foundationColors.gray600`) семантически корректен для неакцентированного текста.
- `text.primary` (`foundationColors.gray500`) является стандартным цветом для основного текста и должен использоваться в остальных случаях.

## 4. Замена `foundationColors.blue100` (`#bbdefb`)

Для этого цвета требуется создание нового семантического токена, так как существующие не подходят для текста на ярком фоне кнопок.

### 4.1. Создание нового токена

**Файл для изменений:** `src/theme/palette/semantic/typography.ts`

**Предлагаемый новый токен:**
```typescript
// Внутри объекта typographyColors.text
onAccent: foundationColors.gray100, // Для текста на ярких, акцентных фонах
```

**Обоснование:** `foundationColors.gray100` (`#f5f5f5`) обеспечивает отличный контраст на цветных фонах (например, кнопок) и уже используется в похожем контексте для `badge.foreground`.

### 4.2. План замены

| Файл | Строка | UI-элемент | Старый цвет | Новый семантический токен |
|---|---|---|---|---|
| `src/theme/ui-modules/inputs-buttons.ts` | 9 | `button.foreground` | `foundationColors.blue100` | `text.onAccent` |
| `src/theme/ui-modules/inputs-buttons.ts` | 12 | `button.secondaryForeground` | `foundationColors.blue100` | `text.onAccent` |
| `src/theme/ui-modules/inputs-buttons.ts` | 15 | `extensionButton.prominentForeground` | `foundationColors.blue100` | `text.onAccent` |

## 5. Итог

Этот план обеспечивает полный переход от проблемных цветов к семантической системе, улучшая консистентность и поддерживаемость темы.